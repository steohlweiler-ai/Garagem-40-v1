{
  "meta": {
    "project": "Garagem 40",
    "date": "2026-02-06",
    "prepared_by": "Generated by Gemini AI"
  },
  "product_overview": "Garagem 40 is a comprehensive management system tailored for automotive workshops, providing full control over service orders, clients, vehicles, inventory, scheduling, and team management via a modern, mobile-friendly interface with AI-powered automation features.",
  "core_goals": [
    "Fully digitize the workshop workflow to improve efficiency and reduce manual errors",
    "Automate repetitive tasks such as invoice and license plate data extraction using OCR technology",
    "Centralize customer, vehicle, and service information for easy access and management",
    "Optimize inventory management with vehicle-specific stock allocation and real-time tracking",
    "Facilitate communication and deadline tracking with status updates and notifications",
    "Implement role-based access control to secure data and manage user permissions effectively"
  ],
  "key_features": [
    "Multi-step wizard for creating and managing comprehensive service orders with status tracking and history logs",
    "Role-based authentication system with granular permissions for admin, stock_manager, operator, finance, and viewer roles",
    "Client and vehicle registration with support for OCR-based license plate scanning and detailed profile management",
    "Inventory management including product catalog, stock movement tracking, and AI-powered invoice OCR for automatic supplier and item extraction",
    "Scheduling system with manual and automatic appointment creation linked to service deadlines and configurable notifications",
    "Customizable evaluation templates organized by service type and section with multimedia support and pricing controls",
    "In-app camera functionality for capturing photos and videos with optimized storage and automatic cleanup",
    "Voice input capability leveraging Web Speech API for supported browsers with graceful fallback handling",
    "Printable formatted reports including service orders, client histories, and detailed inspection sheets",
    "Responsive design with modern UI elements like cards, badges, gradients, and glass-morphism, optimized for mobile and desktop"
  ],
  "user_flow_summary": [
    "Create New Service Order: User initiates new OS creation via a guided 4-step wizard involving client/vehicle selection (OCR-supported), assessment sheet completion, task addition with pricing and assignment, and final review before saving",
    "Receive Invoice: User uploads invoice image, system processes with OCR to extract supplier and item data, user validates or creates products from suggestions, inventory updates with movement recorded",
    "Execute Task as Operator: Operator opens assigned task within a service order, starts timer, performs work adding media and observations, completes task recording time and status",
    "Allocate Parts to Vehicle: User selects vehicle and service, searches and selects products for allocation with system verifying stock and reserving parts, updating stock movements and vehicle-specific allocations"
  ],
  "validation_criteria": [
    "Service order creation workflow completes with accurate data persistence and correct task associations",
    "OCR processing for invoices and license plates achieves high confidence extraction with manual validation options",
    "Role-based permissions enforce data visibility and action restrictions including financial data masking",
    "Inventory movements reflect real-time stock availability and allocation statuses without inconsistencies",
    "Scheduling system triggers notifications as configured and correctly links appointments to service deadlines",
    "User interface components adhere to mobile-first responsive design and provide consistent visual feedback and accessibility"
  ],
  "code_summary": {
    "tech_stack": [
      "TypeScript",
      "React 19.2.3",
      "Vite 6.2.0",
      "TailwindCSS 4.1.18",
      "Supabase (PostgreSQL + Auth + Storage)",
      "Google Gemini 1.5 Flash (OCR)",
      "Lucide React (Icons)"
    ],
    "features": [
      {
        "name": "Authentication System",
        "description": "User authentication with role-based access control (RBAC). Supports admin, stock_manager, operador, financeiro, and visualizador roles with granular permissions.",
        "files": [
          "src/providers/AuthProvider.tsx",
          "src/components/Auth.tsx",
          "src/components/UpdatePassword.tsx",
          "src/types/index.ts"
        ]
      },
      {
        "name": "Service Order Management",
        "description": "Complete workflow for creating and managing service orders (OS) with multi-step wizard, status tracking, task assignment, and timeline visualization.",
        "files": [
          "src/components/wizards/NewServiceWizard.tsx",
          "src/components/ServiceCard.tsx",
          "src/components/ServiceDetail.tsx",
          "src/components/StatusBadge.tsx",
          "src/providers/ServicesProvider.tsx",
          "src/services/supabaseService.ts"
        ]
      },
      {
        "name": "Task Management",
        "description": "Task creation, assignment, time tracking, and execution. Supports different task types (Troca, Chaparia, Pintura, Mecânica) with hourly or fixed pricing.",
        "files": [
          "src/components/ServiceDetail.tsx",
          "src/types/index.ts"
        ]
      },
      {
        "name": "Client Management",
        "description": "Client registration, search, and history tracking with detailed profiles and associated vehicles.",
        "files": [
          "src/components/ClientsTab.tsx",
          "src/components/ClientDetails.tsx",
          "src/components/ClientReportPrint.tsx",
          "src/services/supabaseService.ts"
        ]
      },
      {
        "name": "Vehicle Management",
        "description": "Vehicle registration with plate scanner (OCR), brand/model catalog, color selector, and stock allocation tracking.",
        "files": [
          "src/components/wizards/NewServiceWizard.tsx",
          "src/components/PlateScanner.tsx",
          "src/components/ColorSelector.tsx",
          "src/components/CatalogManagement.tsx",
          "src/services/geminiService.ts"
        ]
      },
      {
        "name": "Inventory Management",
        "description": "Product catalog, stock movements, invoice processing with OCR, and vehicle-specific stock allocation.",
        "files": [
          "src/pages/Stock.tsx",
          "src/components/ReceiveInvoice.tsx",
          "src/components/ValidateInvoiceItems.tsx",
          "src/components/AllocateToVehicleModal.tsx",
          "src/components/StockByVehicle.tsx",
          "src/components/VehicleStockPanel.tsx",
          "src/components/StockDashboardMini.tsx",
          "src/services/supabaseService.ts"
        ]
      },
      {
        "name": "Invoice OCR Processing",
        "description": "AI-powered invoice text extraction using Google Gemini 1.5 Flash. Automatically identifies supplier, items, quantities, and prices with confidence scoring.",
        "files": [
          "src/components/ReceiveInvoice.tsx",
          "src/components/ValidateInvoiceItems.tsx",
          "src/services/geminiService.ts"
        ]
      },
      {
        "name": "Plate Scanner OCR",
        "description": "Camera-based license plate recognition using Google Gemini for automatic plate number extraction.",
        "files": [
          "src/components/PlateScanner.tsx",
          "src/services/geminiService.ts"
        ]
      },
      {
        "name": "Scheduling System",
        "description": "Appointment management with manual and automatic scheduling (linked to service delivery dates). Includes notification settings.",
        "files": [
          "src/components/Agendamentos.tsx",
          "src/services/supabaseService.ts"
        ]
      },
      {
        "name": "Evaluation Templates",
        "description": "Customizable inspection checklists organized by sections (Motor, Suspensão, etc.) with media support and pricing configuration.",
        "files": [
          "src/components/TemplateManagement.tsx",
          "src/components/EvaluationSheet.tsx",
          "src/types/index.ts"
        ]
      },
      {
        "name": "Settings & Configuration",
        "description": "Workshop settings, labor rates, delay criteria, status management, user management, and color/vehicle catalog configuration.",
        "files": [
          "src/pages/Settings.tsx",
          "src/components/WorkshopSettings.tsx",
          "src/components/RatesSettings.tsx",
          "src/components/DelaySettings.tsx",
          "src/components/StatusManagement.tsx",
          "src/components/UserManagement.tsx",
          "src/components/ColorManagement.tsx"
        ]
      },
      {
        "name": "Dashboard & Filtering",
        "description": "Main dashboard with service counters by status, filtering by date ranges and status, and sorting options.",
        "files": [
          "src/pages/Dashboard.tsx",
          "src/components/FilterModal.tsx",
          "src/App.tsx"
        ]
      },
      {
        "name": "Camera Capture",
        "description": "In-app camera for capturing photos and videos with preview and validation.",
        "files": [
          "src/components/CameraCapture.tsx"
        ]
      },
      {
        "name": "Voice Input",
        "description": "Voice-to-text input using Web Speech API for supported browsers (Chrome, Edge). Fallback message for unsupported browsers.",
        "files": [
          "src/components/VoiceInput.tsx"
        ]
      },
      {
        "name": "Print & Reports",
        "description": "Printable service orders and client reports with formatted layouts and workshop branding.",
        "files": [
          "src/components/PrintModal.tsx",
          "src/components/ClientReportPrint.tsx"
        ]
      },
      {
        "name": "Price Display (RBAC)",
        "description": "Conditional price display component that masks financial values for users without view_financials permission.",
        "files": [
          "src/components/PriceDisplay.tsx"
        ]
      },
      {
        "name": "Layout System",
        "description": "Responsive layout with header, sidebar, and mobile bottom navigation. Adapts to device screen size.",
        "files": [
          "src/layouts/MainLayout.tsx",
          "src/layouts/Header.tsx",
          "src/layouts/Sidebar.tsx",
          "src/layouts/MobileNavigation.tsx"
        ]
      },
      {
        "name": "Routing",
        "description": "React Router-based navigation with protected routes and role-based access.",
        "files": [
          "src/routes/AppRoutes.tsx",
          "src/App.tsx"
        ]
      },
      {
        "name": "Error Handling",
        "description": "Global and component-level error boundaries with user-friendly error messages.",
        "files": [
          "src/components/GlobalErrorBoundary.tsx",
          "src/components/ErrorBoundary.tsx"
        ]
      },
      {
        "name": "Custom Hooks",
        "description": "Reusable React hooks for back button handling and other common behaviors.",
        "files": [
          "src/hooks/useBackButton.ts"
        ]
      },
      {
        "name": "Utilities",
        "description": "Helper functions for date formatting, filtering, calculations, and data transformations.",
        "files": [
          "src/utils/"
        ]
      },
      {
        "name": "Supabase Integration",
        "description": "Complete data layer with RLS, authentication, storage, and realtime subscriptions. Handles all database operations.",
        "files": [
          "src/services/supabaseService.ts",
          "src/services/dataProvider.ts"
        ]
      }
    ]
  }
}
